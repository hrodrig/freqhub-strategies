# FreqHub Strategies - Curated Strategies for Freqtrade to be used with FreqHub
# Copyright (C) 2025 - 2026  FreqHub Strategies Contributors
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <https://www.gnu.org/licenses/>.
#
# ⚖️ DISCLAIMER
# USE AT YOUR OWN RISK
#
# This software is provided "as is", without warranty of any kind, express or implied,
# including but not limited to the warranties of merchantability, fitness for a particular
# purpose and noninfringement. In no event shall the authors or copyright holders be liable
# for any claim, damages or other liability, whether in an action of contract, tort or
# otherwise, arising from, out of or in connection with the software or the use or other
# dealings in the software.
#
# Trading cryptocurrencies involves substantial risk of loss and is not suitable for every
# investor. The value of cryptocurrencies may fluctuate, and you may lose some or all of
# your investment. Past performance is not indicative of future results.
#
# Docker Compose example for running multiple Freqtrade instances
# This file is for local development or when you want to run FreqHub locally
# and connect to Freqtrade bots running in Docker containers
#
# Usage:
#   see README.md for usage

name: freqhub-stack

services:
  freqtrade-failure-to-return:
    build: .
    image: freqhub-strategy-failure-to-return:latest
    container_name: freqtrade-failure-to-return
    restart: unless-stopped
    ports:
      - "8012:8080"
    volumes:
      - ./config.json:/freqtrade/user_data/config.json:ro
      - ./user_data/data:/freqtrade/user_data/data
      - ./user_data/logs:/freqtrade/user_data/logs
    environment:
      # API Server Configuration
      - FREQTRADE__API_SERVER__ENABLED=true
      - FREQTRADE__API_SERVER__LISTEN_IP_ADDRESS=0.0.0.0
      - FREQTRADE__API_SERVER__LISTEN_PORT=8080
      - FREQTRADE__API_SERVER__USERNAME=${FREQTRADE_USERNAME:-freqtrader}
      - FREQTRADE__API_SERVER__PASSWORD=${FREQTRADE_PASSWORD_2:-SuperSecretPass}
      - FREQTRADE__API_SERVER__JWT_SECRET_KEY=${FREQTRADE_JWT_SECRET:-change-me}
      - FREQTRADE__API_SERVER__CORS_ORIGINS=["http://localhost:3000","http://localhost:3001"]
      # Exchange Configuration
      - FREQTRADE__EXCHANGE__NAME=${FREQTRADE_EXCHANGE_NAME:-binance}
      - FREQTRADE__EXCHANGE__KEY=${FREQTRADE_EXCHANGE_KEY_2:-}
      - FREQTRADE__EXCHANGE__SECRET=${FREQTRADE_EXCHANGE_SECRET_2:-}
      # Trading Configuration
      - FREQTRADE__DRY_RUN=${FREQTRADE_DRY_RUN:-true}
      - FREQTRADE__DRY_RUN_WALLET=${FREQTRADE_DRY_RUN_WALLET:-1000}
      - FREQTRADE__STRATEGY=FailureToReturnStrategy
    command: >
      trade
      --logfile /freqtrade/user_data/logs/freqtrade.log
      --db-url sqlite:////freqtrade/user_data/data/tradesv3.sqlite
      --config /freqtrade/user_data/config.json
      --strategy FailureToReturnStrategy
    networks:
      - freqtrade-network
    healthcheck:
      test: ["CMD", "curl", "-f", "http://127.0.0.1:8080/api/v1/ping"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 60s

networks:
  freqtrade-network:
    external: true
